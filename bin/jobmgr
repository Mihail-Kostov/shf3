#!/bin/bash
source $(dirname ${BASH_SOURCE})/../lib/header
import que
import gui

function help/jobmgr() {
  cat << EOF

Job Submitter

Usage: ${gbn} options
              -b jobfile  - submitt
              -l jobfile  - login
              -f database - job track
              -n - no check
              -v - verbose
EOF
  exit ${_false_}
}

### args
_j="batch.job"
_c="LIST"
_f=""
_n=true
_v=false
while getopts hvns:l:f: o; do
  case "$o" in
    s) _c="BATCH"; _j=$OPTARG;;
    l) _c="LOGIN"; _j=$OPTARG;;
    f) _f=$OPTARG;;
    n) _n=false;;
    v) gdbg=true;;
    h|*) help/jobmgr;;
  esac
done

### main
case "${_c}" in
  BATCH)
    _msg="Batch";;
  LOGIN)
    _msg="Login";;
  LIST)
    _msg="Job Track";;
esac

echo
msg "${_msg}"
gui/line

# track database
import que/track
que_track_db="${grd}/sql/${que_track_db}"

# overrides
if ! test -z "${_f}" ; then
  que_track_db="${_f}"
fi

que/sub "${_c}" "${_j}" ${_n}
