#!/bin/bash
source $(dirname ${BASH_SOURCE})/../lib/header
import enc/pass

function passmgr/help() {
  cat << EOF

Random password manager for the console

Usage: ${gbn} options
              -l length
              -u uid
              -f database
              -c - change
              -n - new
              -d - delete
EOF
  exit ${_false_}
}

### args
_l=42
_u=""
_m="LIST"
_f=""
while getopts hf:u:l:cnv o; do
  case "$o" in
    f) _f=$OPTARG;;
    u) _u=$OPTARG;;
    l) _l=$OPTARG;;
    c) _m="CHANGE";;
    n) _m="CREATE";;
    v) gdbg=true;;
    h) passmgr/help;;
    *) passmgr/help;;
  esac
done

### main
if test "${_m}" != "LIST" && test "${_u}" = "" ; then
  echo -n "User: "
  read _u
fi

enc_pass_db="$(ns/dir)/../sql/${enc_pass_db}"
if ! test -z "${_f}" ; then
  enc_pass_db="${_f}"
fi
enc/pass/mgr "${_m}" ${_l} "${_u}"
