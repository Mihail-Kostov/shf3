#!/bin/bash
source $(dirname ${BASH_SOURCE})/../lib/header
import gui
import enc/pass

function passmgr/help() {
  cat << EOF

Random password manager for the console

Usage: ${gbn} options
              -l length
              -f database
              -u uid - retrieve
              -c uid - change
              -n uid - new
              -d uid - delete
EOF
  exit ${_false_}
}

### args
_l=21
_u=""
_m="LIST"
_f=""
while getopts hf:l:c:n:d:u:v o; do
  case "$o" in
    f) _f=$OPTARG;;
    l) _l=$OPTARG;;
    u) _u=$OPTARG;;
    c) _m="CHANGE"; _u=$OPTARG;;
    n) _m="CREATE"; _u=$OPTARG;;
    d) _m="DELETE"; _u=$OPTARG;;
    v) gdbg=true;;
    h) passmgr/help;;
    *) passmgr/help;;
  esac
done

### main
echo
msg
gui/line

enc_pass_db="$(ns/dir)/../sql/${enc_pass_db}"
if ! test -z "${_f}" ; then
  enc_pass_db="${_f}"
fi
enc/pass/mgr "${_m}" ${_l} "${_u}"
