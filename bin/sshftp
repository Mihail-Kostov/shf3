#!/bin/bash
gbn=$(basename ${BASH_SOURCE})
gdn=$(dirname ${BASH_SOURCE})
rc="${gdn}/.${gbn}rc"

function sshftp/help() {
  cat << EOF

Shell Framework CLI

Usage: ${gbn} options
              -v - verbose
EOF
  exit 1
}

function sshftp/stop() {
  if test -r "${rc}" ; then
    rm -f "${rc}"
  fi
  exit 1
}
trap sshftp/stop INT TERM EXIT

### args
_v=false
while getopts hv o; do
  case "$o" in
    v) _v=true;;
    h) sshftp/help;;
    *) sshftp/help;;
  esac
done

### main
cat << EOF > "${rc}"
source $(dirname ${BASH_SOURCE})/../lib/header
export PS1="SSHFTP(\$?)> "
EOF
if ${_v} ; then
  echo "gdbg=true" >> "${rc}"
fi
cat << EOF >> "${rc}"
import gui
import ssh/ftp

msg "SSH FTP"
gui/line 84
EOF

bash --noprofile --rcfile "${rc}"
